//{{V2}}
ORGANIZATION_BLOCK OB1
TITLE= "Zyklisches Hauptprogramm"
//Ofentür Steuerung nach KOP


AUTHOR:nb
FAMILY:nb
NAME:nb
VERSION:1.0


VAR_TEMP
       OB1_EV_CLASS:BYTE //Bits 0-3 = 1 (Coming event), Bits 4-7 = 1 (Event class 1)
       OB1_SCAN_1:BYTE //1 (Cold restart scan 1 of OB 1), 3 (Scan 2-n of OB 1)
       OB1_PRIORITY:BYTE //1 (Priority of 1 is lowest)
       OB1_OB_NUMBR:BYTE //1 (Organization block 1, OB1)
       OB1_RESERVED_1:BYTE //Reserved for system
       OB1_RESERVED_2:BYTE //Reserved for system
       OB1_PREV_CYCLE:INT //Cycle time of previous OB1 scan (milliseconds)
       OB1_MIN_CYCLE:INT //Minimum cycle time of OB1 (milliseconds)
       OB1_MAX_CYCLE:INT //Maximum cycle time of OB1 (milliseconds)
       OB1_DATE_TIME:DATE_AND_TIME //Date and time OB1 started
END_VAR
BEGIN

NETWORK
TITLE=Ofen Tür schließen
//{{k}}
//Wenn S3 betätigt, schließt die Tür bis Endschalter S5 "1" wird
//
//Türe stoppt, wenn NOTAUS, STOPP, LICHTGITTER oder GREIFER aktiv

       U    E         0.2
       U    E         0.5
       S    A         0.1
       U(   
       O    E         0.1
       O    A         0.0
       ON   E         0.5
       O    M        20.0
       )    
       R    A         0.1
NETWORK
TITLE=Ofen Tür öffnen
//{{k}}
//Wenn S1 betätigt, dann soll die Türe sich öffnen.
//
//Türe stoppt, wenn NOTAUS, STOPP, LICHTGITTER oder GREIFER aktiv

       U    E         0.1
       U    E         0.4
       S    A         0.0
       U(   
       ON   E0.4
       O    M        20.0
       )    
       R    A         0.0
NETWORK
TITLE=Signalleuchte H1
//{{k}}
//H1 leuchtet auf, wenn Ofen Tür in Bewegung ist

       U(   
       O    A0.1
       O    A0.0
       )    
       =    A0.2
NETWORK
TITLE=Greifer einfahren
//{{k}}
//Wenn Ofentür offen ist (S4), Magnet ein (S9) und Schalter S7 aktiv sind, darf der Greifer einfahren

       U    E1.1
       UN   E         1.0
       UN   A         0.3
       S    A         0.4
       U(   
       O    M        20.1
       O    E         1.5
       )    
       R    A0.4
NETWORK
TITLE=Greifer ausfahren
//{{k}}
//Wenn Ofentür offen ist (S4), Magnet ein (S9) und Schalter S8 aktiv sind, darf der Greifer ausfahren

       U    E         1.0
       UN   E         1.1
       UN   A         0.4
       S    A         0.3
       U(   
       O    M        20.1
       O    E         1.4
       )    
       R    A         0.3
NETWORK
TITLE=Magnet einschalten und ausschalten
//{{k}}

       U    E1.2
       UN   E1.3
       S    A1.0
       U    E1.3
       UN   E1.2
       R    A1.0
NETWORK
TITLE=Sammelmerker Sperre Tür
//{{k}}
//Sammelmerker Sperre Tür

       ON   E0.0  
       ON   E         0.6  
       O    A         0.3  
       O    A         0.4  
       O    E         1.4  
       ON   E         0.3
       =    M        20.0
NETWORK
TITLE=Greifer einfahren
//{{k}}
//Wenn Ofentür offen ist (S4), Magnet ein (S9) und Schalter S7 aktiv sind, darf der Greifer einfahren

       ON   E0.0  
       ON   E         0.6  
       O    E         0.4  
       =    M        20.1
END_ORGANIZATION_BLOCK
